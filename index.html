<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>iwannasun</title>
  <link rel="stylesheet" href="./styles.css">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <h1>iwannasun</h1>
      <div class="sub">Find your next sun moment.</div>
    </div>

    <div class="controls" aria-label="Location and controls">
      <div class="muted small" style="margin-top:2px">Pick a place → get your next sun break</div>
      <div class="cityWrap">
        <label for="cityInput" class="srOnly">Search city</label>
        <input
          id="cityInput"
          class="cityInput"
          type="text"
          inputmode="search"
          autocomplete="off"
          placeholder="Search city…"
          aria-label="Search city"
          aria-autocomplete="list"
          aria-controls="cityResults"
          aria-expanded="false"
        />
        <div id="cityResults" class="suggest" role="listbox"></div>
      </div>

      <div class="pillRow">
        <span class="pill" id="locPill" title="Location">—</span>
        <span class="pill" id="timePill" title="Local time">—</span>
      </div>

      <div class="btnRow">
        <button id="btnHere" class="btn" type="button">Use my spot</button>
      </div>
    </div>
  </header>

  <div class="wrap">
    <div class="grid">
      <div class="card cardRel">
        <!-- aria-busy defaults to false; app.js toggles it -->
        <div id="loadingOverlay" class="loadingOverlay" aria-live="polite" aria-busy="false">
          <div class="loadingInner">
            <div class="spinner" aria-hidden="true"></div>
            <div class="loadingText">
              <div class="loadingTitle">Loading forecast…</div>
              <div class="muted small">Fetching clouds + sun path</div>
            </div>
          </div>
        </div>

        <div class="row rowBetweenTop">
          <div class="decisionBlock">
            <div class="big" id="decisionWrap"><span id="decisionText">—</span></div>
            <div class="muted small decisionContext" id="decisionContext"></div>
            <div class="muted small whyInline" id="whyInline"></div>
          </div>

          <div class="row rowTop rightControls">
            <select id="daySelect" aria-label="Select day">
              <option value="0">Today</option>
              <option value="1">Tomorrow</option>
            </select>
            <button id="btnRefresh" class="btn" type="button">Refresh</button>
          </div>
        </div>

        <div class="kpi">
          <div class="box">
            <div class="label" id="labelScore">Sun score now</div>
            <div class="valueRow">
              <div class="value" id="scoreNow">—</div>
              <div class="meter" aria-hidden="true"><div class="fill" id="meterScore"></div></div>
            </div>
          </div>

          <div class="box">
            <div class="label" id="labelConf">
              Confidence now
            </div>
            <div class="valueRow">
              <div class="value" id="confNow">—</div>
              <div class="meter" aria-hidden="true"><div class="fill" id="meterConf"></div></div>
            </div>
          </div>

          <div class="box" id="boxSun60">
            <div class="label" id="labelSun60">Sunny minutes next 1h</div>
            <div class="value" id="sun60">—</div>
          </div>

          <div class="box" id="boxSun120">
            <div class="label" id="labelSun120">Sunny minutes next 2h</div>
            <div class="value" id="sun120">—</div>
          </div>
        </div>

        <div class="chartBlock">
          <div class="small chartTitle" id="chartTitle">
            <span>Elevation (°)</span><span>line intensity = sun score</span>
          </div>
          <div class="chartWrap">
            <div class="yAxis" id="yAxis"></div>
            <canvas id="sunChart" width="900" height="250" aria-label="Sun elevation chart with sun score intensity"></canvas>
          </div>
          <div class="xAxis" id="xAxis"></div>
        </div>

        <div class="timeline" id="timeline" aria-label="Sun score timeline"></div>
        <div class="err" id="errBox" role="status" aria-live="polite"></div>
      </div>

      <div class="side">
        <!-- Positioning line (keeps the hero clean but makes the product clear) -->
        <div class="positioningLine" id="positioningLine" aria-label="What makes iwannasun different">
          <div class="muted small">Most weather apps show cloud percentage. iwannasun shows when sunlight really breaks through.</div>
        </div>
        <!-- Ad slot (sidebar). Reserved space so monetisation doesn't break layout later. -->
        <div class="adSlot" id="adSidebar" aria-label="Advertisement">
          <div class="adSlotLabel">Advertisement</div>
        </div>

        <div class="card">
          <div class="muted small">Your next sun break</div>
          <div class="big" id="nextWindow">—</div>
          <div class="muted nextWindowSub" id="nextWindowSub">—</div>

          <div class="sunTimesRow">
            <div>
              <div class="muted small">Morning light</div>
              <div class="big sunTimeValue" id="sunriseTime">—</div>
            </div>
            <div>
              <div class="muted small">Evening light</div>
              <div class="big sunTimeValue" id="sunsetTime">—</div>
            </div>
          </div>
        </div>

        <div class="card notes">
          <div class="muted small"><b id="about">How it works</b></div>
          <div class="muted small aboutText">
            <b>Why cloud percentage can mislead</b><br>
            Cloud percentage does not tell you if the sun is actually blocked, especially when the sun is low on the horizon.<br><br>

            <b>What iwannasun does differently</b><br>
            iwannasun follows the sun’s exact path and checks the clouds along that path, so you know when sunlight really breaks through.<br><br>

            <b>Sun Score</b><br>
            The chance that the sun is directly visible.<br><br>

            <b>Confidence</b><br>
            How steady that situation is likely to stay.

            <div class="muted small" style="margin-top:10px">Tip: Add this page to your home screen for a fast daily check.</div>
          </div>
        </div>
      </div>

      <!-- Ad slot (mobile). Placed after main content; can be shown/hidden via CSS later. -->
      <div class="adSlot small" id="adMobile" aria-label="Advertisement">
        <div class="adSlotLabel">Advertisement</div>
      </div>
    </div>

    
  </div>

  <script src="./app.js" defer></script>
</body>
</html>
